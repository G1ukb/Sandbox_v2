### What is Amazon Simple Notification Service (Amazon SNS)?

Amazon Simple Notification Service (Amazon SNS) — 
это веб-служба отправки уведомлений из облака. 
Он предоставляет разработчикам возможность публиковать сообщения
из приложения и немедленно доставлять их подписчикам 
или другим приложениям.

### What messaging patterns do SNS and SQS implement? Какие шаблоны обмена сообщениями реализуют SNS и SQS?

Amazon SNS позволяет приложениям отправлять срочные сообщения 
нескольким подписчикам с помощью механизма «push», 
что избавляет от необходимости периодически проверять или «опрашивать»
наличие обновлений.

SQS - это служба очереди сообщений, используемая для обмена сообщениями
через модель опроса (когда пользователь сам спрашивает если ли сообщение),
и может использоваться для разделения компонентов отправки и получения.

### What delivery protocols does SNS support?

Сообщение отправляются по транспортным протоколам 
HTTP, HTTPS, Email-JSON и SQS, 
будет состоять из простого объекта JSON, 
который будет включать вложенную информацию

### How large SQS messages can be? What happens when that limit is exceeded?

Максимальный размер — 262 144 байта (256 КБ).

Для отправки сообщений размером более 256 КБ можно использовать 
расширенную клиентскую библиотеку Amazon SQS для Java. 

Эта библиотека позволяет отправлять сообщения Amazon SQS, 
содержащие ссылку на полезные данные сообщения в Amazon S3. 
Максимальный размер полезной нагрузки составляет 2 ГБ.

В случае превышения aws разделит сообщения и отправит

### What are the typical scenarios for using SQS?

Лучший механизм использования очередей является собственно механизм очереди
когда что-то одновременно получает огромное кол-во сообщений и эти
сообщения мы не можем обработать сразу ввиду своих вычислительных способностей

Физическим примером является смс голосование, когда огромное кол-во людей
фигачить в сервис и он кидает все сообщения в очередь и обрабатывает 
без риска тормоза всей системы

### What’s the difference between standard and FIFO queues in SQS?

Стандартные очереди

- **Неограниченная пропускная способность.** 
Стандартные очереди поддерживают почти неограниченное количество 
транзакций в секунду (TPS).

- **Доставка по принципу «хотя бы один раз».** 
Сообщение доставляется как минимум один раз, иногда доставляется несколько копий сообщения.

- **Упорядочение «Наилучшее из возможного».** 
Иногда сообщения могут быть доставлены в порядке, отличающемся от 
порядка их отправки.

Очереди FIFO (First in First out)

- **Высокая пропускная способность.** 
По умолчанию очереди FIFO поддерживают обработку до 300 сообщений 
в секунду (300 операций отправки, получения или удаления в секунду).

- **Строго однократная обработка.** 
Сообщение доставляется один раз и остается доступным до тех пор, 
пока получатель не обработает и не удалит его. 
Дублирующие сообщения в очередь не помещаются.

- **Доставка по принципу «первым получено – первым отправлено».** 
Порядок, в котором сообщения отправляются и принимаются, 
строго сохраняется.

### What is SNS pricing?

В зависимости от типа передачи сообщения, цена выстраивается от кол-ва сообщений
как пример
Mobile Push Notifications	$0.50 per million notifications

### What is SQS pricing?

В зависимости от типа передачи сообщения, цена выстраивается от кол-ва сообщений
и типа выбранной обработки (Standard \\ FIFO)
как пример
From 1 Million to 100 Billion Requests/Month	(ST)$0.40	(FIFO)$0.50

### What are SNS security best practices?

Советы от aws:
- Убедитесь, что топики (sns) не являются общедоступными
- Реализовать доступ с минимальными привилегиями
- Реализовать шифрование на стороне сервера
- Принудительное шифрование данных при передаче
- Рассмотрите возможность использования конечных точек VPC для доступа к Amazon SNS.

### What are the security features supported by SNS/SQS?

Amazon SNS предоставляет полный набор функций безопасности 
для защиты ваших данных от несанкционированного и анонимного доступа, 
включая шифрование сообщений при передаче с помощью сертификатов 
Amazon ATS, шифрование сообщений в состоянии покоя с помощью ключей 
AWS KMS, конфиденциальность сообщений с помощью AWS PrivateLink 
и аудит с помощью AWS CloudTrail.

Кроме того, вы можете подписать зашифрованные очереди Amazon SQS 
на зашифрованные темы Amazon SNS, 
чтобы установить сквозное шифрование в своих сценариях обмена сообщениями.

### What is the anatomy of an SNS message? (атрибуты SNS)

Имя — имя атрибута сообщения. 
Имя не должно начинаться или заканчиваться точкой, 
а также не должно иметь последовательных точек. 
Имя может содержать до 256 символов.

Тип — поддерживаемые типы данных атрибута сообщения: 
String, String.Array, Number и Binary.

Значение – указанное пользователем значение атрибута сообщения. 
Для строковых типов данных атрибут value имеет те же ограничения 
на содержимое, что и тело сообщения.

### What can SNS do in case of failing messages?

Если сообщение не может быть успешно доставлено с первой попытки, 
Amazon SNS применяет четырехэтапную политику повторных попыток: 
1) повторные попытки без задержки между попытками, 
2) повторные попытки с минимальной задержкой между попытками, 
3) повторные попытки в соответствии с отсрочкой (настроено)
4) повторные попытки с максимальной задержкой между попытками. 

Когда политика повторной доставки сообщения исчерпана, 
Amazon SNS может переместить сообщение в очередь недоставленных 
сообщений (DLQ). 

#### What is Amazon SNS dead-letter queues (DLQs)?

Очередь недоставленных сообщений — это очередь Amazon SQS, 
которую подписка Amazon SNS может использовать для сообщений, 
которые не могут быть успешно доставлены подписчикам. 
Сообщения, которые не могут быть доставлены из-за ошибок клиента
или сервера, помещаются в очередь недоставленных сообщений 
для дальнейшего анализа или повторной обработки.

### What is SNS message filtering?

По умолчанию подписчик темы Amazon SNS получает каждое сообщение, 
опубликованное в теме. 
Чтобы получать подмножество сообщений, 
подписчик должен назначить политику фильтрации для подписки на тему.

Политика фильтрации — это простой объект JSON, 
содержащий атрибуты, определяющие, какие сообщения получает подписчик. 
Когда вы публикуете сообщение в теме, 
Amazon SNS сравнивает атрибуты сообщения с атрибутами в политике 
фильтрации для каждой из подписок темы. 
Если какой-либо из атрибутов совпадает, Amazon SNS отправляет 
сообщение подписчику. 
В противном случае Amazon SNS пропускает подписчика 
без отправки сообщения. 
Если у подписки нет политики фильтрации, подписка получает 
каждое сообщение, опубликованное в ее теме.

### How is it possible to monitor SNS delivery process?

- aws консоль CloudWatch,
- собственного интерфейса командной строки (CLI) CloudWatch 
- программно с помощью CloudWatch API. 

### What is message lifecycle in SQS?

![img](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/images/sqs-message-lifecycle-diagram.png)

- Отправка сообщения (сообщение избыточно распределяется по серверам Amazon SQS.)
- Получение сообщения (Пока сообщение A обрабатывается, оно остается в очереди и не возвращается для последующих запросов на получение)
- Удаление

### What’s the difference between short and long polling in SQS?

Длительный опрос Amazon SQS — это способ извлечения сообщений 
из ваших очередей Amazon SQS. 

В то время как **обычный короткий опрос** возвращает результат немедленно,
даже если опрашиваемая очередь сообщений пуста

**длительный** опрос не возвращает ответ до тех пор, пока сообщение 
не поступит в очередь сообщений или пока не истечет 
время длительного опроса.

