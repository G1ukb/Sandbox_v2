### Что такое Cloud Formation?

CloudFormation — это платформа автоматизации инфраструктуры 
для AWS, которая развертывает ресурсы AWS в масштабе 
гораздо быстрее, эффективнее и безопаснее.

### What are the benefits of AWS Cloud Formation?

Преимущества CloudFormation:
- <b> Скорость развертывания </b> 
(Сама суть Cloud Formation в том, чтобы 
после единовременной настройки Formation не настраивать процесс
деплоя вообще, что играет огромную роль)
- <b> Масштабирование </b> 
(Возможность в любой момент времени контролировать, 
уменьшать или увеличивать кол-во развернутых инстансов)
- <b> Интеграция услуг </b> 
(Из-за того что владельцем является AWS есть тонкая настройка
и интеграция предоставляемых услуг сразу на разворачиваемые 
инстансы: это могут быть s3, vpc, расширение памяти и т.д.)
- <b> Последовательность </b> 
(CloudFormation гарантирует, что приложения и службы будут 
согласованными и идентичными, независимо от того, 
сколько экземпляров создается)
- <b> Безопасность </b> 
(Гарантирует снижения риска недосмотра или человеческих ошибок)

### What are the elements of an AWS CloudFormation template?

#### What are the essential building blocks which Cloud Formation templates do not work without?

1. (Необязательный) список параметров шаблона (входные значения)
2. (Необязательный) список выходных значений (например, полный URL-адрес веб-приложения).
3. (Необязательный) список таблиц данных, используемых для поиска значений статической конфигурации (например, имен AMI).
4. (Обязательно)    список ресурсов AWS и их значения конфигурации
5. (Обязательно)    номер версии формата файла шаблона

### AWS Cloud Formation use cases?

- глобально масштабировать инфраструктуру.
- помогает соблюдать стандарты безопасности, 
  соответствия и конфигурации в рамках всей организации, 
  учетных записей AWS и регионов.
- легко интегрировать с другими сервисами AWS

### What happens when a CF stack is updated?

AWS CloudFormation сравнивает отправляемые вами изменения 
с текущим состоянием вашего стека и обновляет только измененные ресурсы.

### What means of parameterization of Cloud Formation templates do you know?

Объявление внутри файла шаблона CloudFormation тега Parameters по примеру:

    Parameters:
        EC2InstanceType:
            Description: The Instance Type Chosen for EC2
            Type: String

И использование параметра через тег !Ref

    InstanceType: !Ref EC2InstanceType

### Is it possible to reuse the same configuration pieces across multiple CF templates without copypasting them? (Nested stacks)

#### Что такое Nested stack?

Вложенные стеки — это стеки, созданные как часть других стеков. 
Вы создаете вложенный стек в другой стек, 
используя ресурс AWS::CloudFormation::Stack.

По мере роста вашей инфраструктуры могут появляться общие шаблоны, 
в которых вы объявляете одни и те же компоненты в нескольких шаблонах. 
Вы можете выделить эти общие компоненты и создать для них специальные 
шаблоны. Затем используйте ресурс в своем шаблоне для ссылки на другие 
шаблоны, создавая вложенные стеки.

[![img](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/images/cfn-console-nested-stacks.png)]

### What is the order of resource creation in CF stacks?

С помощью атрибута DependsOn вы можете указать, 
что создание определенного ресурса следует за другим. 
Когда вы добавляете атрибут DependsOn к ресурсу, 
этот ресурс создается только после создания ресурса, 
указанного в атрибуте DependsOn.

#### Примеры использования?

- Объявите зависимости для ресурсов, которые должны создаваться или удаляться в определенном порядке.
- Переопределить параллелизм по умолчанию при создании, обновлении или удалении ресурсов.
- Создание одних ресурсов вслед за другими (как пример, сначала настройка VPC, потом подключение EC2)

### What happens with the resources created within a CF stack when that stack is deleted?

AWS CloudFormation обеспечивает создание или удаление всех ресурсов 
стека по мере необходимости. 

Поскольку AWS CloudFormation обрабатывает ресурсы стека как единое целое,
все они должны быть успешно созданы или удалены, 
чтобы стек был создан или удален. 

Если ресурс создать не удается, AWS CloudFormation выполняет 
откат стека и автоматически удаляет все созданные ресурсы. 

Если ресурс невозможно удалить, все оставшиеся ресурсы 
сохраняются до тех пор, пока стек не будет успешно удален.

### Can a CF template use AWS resources created outside CF?

Да, чтобы импортировать существующие ресурсы в стек CloudFormation, вам необходимо предоставить:

- Уникальный идентификатор для каждого целевого ресурса, 
  например имя таблицы Amazon DynamoDB или корзины S3, 
  которую вы хотите импортировать.

### Is it possible to test CF templates before creating any resources with them?

Прежде чем использовать шаблон для создания или обновления стека, 
вы можете использовать CloudFormation для его проверки. 
Проверка шаблона может помочь вам обнаружить синтаксические 
и некоторые семантические ошибки, такие как циклические зависимости, 
до того, как CloudFormation создаст какие-либо ресурсы.

### What is CF pricing?

Общая сумма = (операции стороннего обработчика * цена за обработчик) 
              + (продолжительность свыше 30 секунд * цена за секунду)

