### Что такое VCS

Система контроля версий (Version Control System) - это система, регистрирующая изменения
в одном или нескольких файлах с тем, чтобы в дальнейшем была возможность вернуться к
определённым старым версиям этих файлов.

### Что Такое Git?

Git — это технология системы контроля версий, 
условно это журнал изменений компьютерных файлов любого типа.

### Каковы преимущества использования GIT?

1) избавляет проект от избыточности данных и репликация
2) высокая доступность проекта
3) только один каталог .git на репозиторий
4) предназначен для общей работы
5) любые проекты могут использовать GIT

### Минусы использования

1) Высоковатый порог входа
2) Занудная техническая документация

### Что такое .git (Репозиторий)

**Репозиторий Git** представляет собой каталог файловой системы, в котором находятся 
файлы конфигурации репозитория, файлы журналов, хранящие операции, 
выполняемые над репозиторием, индекс, описывающий расположение файлов, и хранилище, содержащее собственно файлы.

Проект может в целом состоять из отдельных репозиториев
В каждом репозитории есть master -> head ветка от которой при необходимости можно
вычленять отдельные ветки

По умолчанию репозиторий хранится в подкаталоге с названием **«.git»** в корневом каталоге рабочей копии дерева файлов

### Что такое конфиг гит

Git использует набор конфигурационных файлов для изменения стандартного поведения, если это необходимо. 
Вначале, Git ищет настройки в файле /etc/gitconfig, который содержит настройки для всех пользователей в 
системе и всех репозиториев.
**git config --system** чтобы использовать этот уровень конфига

Следующее место, куда смотрит Git — это файл ~/.gitconfig (C:/restMain.user.User/.gitconfig), 
который хранит настройки конкретного пользователя. 
Вы можете указать Git читать и писать в него, используя опцию **--global**.

Наконец, Git ищет параметры конфигурации в файле настроек в директории Git (.git/config)
используемого в данный момент репозитория.
Эти значения относятся только к текущему репозиторию и доступны при передаче параметра **--local** команде git config.
! Если другой уровень конфигурации не выбран явно, то используется --local

### Разделы гита

- [Working directory]   Рабочая директория      - слепок репозитория
- [Staging Area]        Промежуточная область   - это файл, обычно содержащийся в вашем каталоге Git, 
в котором хранится информация о том, что войдет в ваш следующий коммит.
- [Git directory]       В каталоге Git.         - Общий репозиторий с которым мы работаем

### Основные состояния файлов git

- Modified  - Изменено означает, что вы изменили файл, но еще не зафиксировали его в своей базе данных.
- Staged    - Этап означает, что вы пометили измененный файл в его текущей версии, чтобы перейти к следующему коммиту.
- Commited  - Хранящийся как часть существующего коммита

#### Как гит понимает что файл был изменен

Git не хранит и не обрабатывает данные способом сохранения промежуточных файлов. 
Вместо этого, подход Git к хранению данных больше похож на набор снимков миниатюрной файловой системы. 
Каждый раз, когда вы делаете коммит, то есть сохраняете состояние своего проекта в Git, 
система запоминает, как выглядит каждый файл в этот момент, и сохраняет ссылку на этот снимок. 
Для увеличения эффективности, если файлы не были изменены, Git не запоминает эти файлы вновь, 
а только создаёт ссылку на предыдущую версию идентичного файла, который уже сохранён. 
Git представляет свои данные как, скажем, поток снимков.

![alt-text](https://git-scm.com/book/en/v2/images/deltas.png)

### Что такое «head», «master» в git и сколько голов можно создать в хранилище

«head» - это просто ссылка на бранчу в которой мы находимся в данный момент.
«master» В каждом репозитории есть заголовок по умолчанию, являющийся корнем всех изменений.

### Каков паттерн ветвления в GIT?
    
Распространенный способ создания ветки в GIT - поддерживать ее как «Main».

Для реализации новых функций делаются ответвления, которые мержутся в основную ветку после
заключительного этапа разработки.

### Что такое «Staging Area» или «Индекс» в GIT?

Все модифичированные файлы перед отправкой репозиториев в удаленный репозиторий
помечаются и находятся в промежуточной зоне и открыты для форматирования или отката

### Что такое git stash

Операция stash берет изменённое состояние вашей рабочей директории, 
то есть изменённые отслеживаемые файлы и проиндексированные изменения, 
и сохраняет их в хранилище незавершённых изменений, 
которые вы можете в любое время применить обратно.

### Fetch vs Pull

git pull — это, по сути, git fetch, после которого сразу же следует git merge. 

git fetch получает изменения с сервера и сохраняет их в refs/remotes/. 
Это никак не влияет на локальные ветки и текущие изменения. 

А git pull вливает все эти изменения в локальную копию.

### Merge vs Rebase

**Git Merge**

Merge — обычная практика для разработчиков, использующих системы контроля версий. 
Слияние принимает содержимое ветки источника и объединяет их с целевой веткой. 
В этом процессе изменяется только целевая ветка. 
История исходных веток остается неизменной.

![alt text](http://blog.alvarezp.org/wp-content/uploads/2019/02/git-merge-commit.jpg)

**Git Rebase**

Команда, которая позволяет разработчикам интегрировать изменения из одной ветви в другую.
Git rebase сжимает все изменения в один «патч». 
Затем он интегрирует патч на целевую ветвь. 
В отличие от слияния, перебазировка сглаживает историю. 
Он передает выполненную работу из одной ветки в другую. 
В процессе, нежелательная история устранена.

![alt text](http://blog.alvarezp.org/wp-content/uploads/2019/02/git-rebase.jpg)

#### Плюсы и минусы Merge vs Rebase 

**Rebase**
+   Оптимизирует потенциально сложную историю.
+   Очищает промежуточные коммиты, делая их единым коммитом, что может быть полезно для команд DevOps.
+   Упрощает процесс их рассмотрения.

-   История теряется
-   Если над веткой трудится несколько человек, их тоже перетрет
-   Нет возможности восстановления

**Merge**
+   Просто и знакомо.
+   Сохраняет полную историю и хронологический порядок.
+   Поддерживает контекст ветви.

-   Из-за большого содержания веток и другого <Мусора> можно потеряться?

#### Когда использовать Merge, когда Rebase

Если вы работаете один или в небольшой команде, 
используйте rebase. Если вы работаете с большой командой, используйте merge
(Если над какой-то фичей работает только один человек, возможно rebase прекрасно подойдет
В остальном случае merge)

#### Push vs ForcePush

Пуш отправляет staged коммиты в global git репозиторий

ForcePush тоже отправляет коммиты но перетирает коммиты выше заменяя коммиты на те которые отправляются
(Опасность в том, что пользователь может перетереть коммиты в случае если в момент его форспуша были
добавлены коммиты от других пользователей)

![atl-text](https://images.thoughtbot.com/git-push-force-with-lease/XEDULrg2QsnzIGytOMfh_XFQLB.jpg)

#### Как вы узнаете в GIT, что ветка уже объединена с мастер веткой

- git branch --merged <ветка> - Список веток которые были смержены с текущей
- git branch --no-merged <ветка> - Список веток которые не были смержены с текущей

Этот шаблон особенно полезен, когда над одним проектом работают несколько разработчиков.

### Что такое «конфликт» в git?
    
«Конфликт» возникает, изменения в одном месте проекта вносятся сразу с нескольких коммитов.
Git не сможет предсказать, какое изменение должно иметь приоритет.

#### Как разрешить конфликт в git?
    
Чтобы разрешить конфликт в git, отредактируйте файлы, чтобы исправить конфликтующие изменения,
а затем добавьте разрешенные файлы, запустив после этого «git add», 
чтобы зафиксировать исправленное слияние, запустить «git commit». 

Git помнит, что вы находитесь в процессе слияния, поэтому он правильно устанавливает родителей коммитов.

### В Чём Различие Между Форками и Ветками?

В Git форк является копией репозитория, которая отличается от оригинала. 
Ветка (branch), используется для изменения определённых частей репозитория 
, чтобы затем объединиться с мастер веткой.

#### Forks vs Branches

**Forks**

Плюсы:
 - Сохраняет ветви, созданные пользователем
 - Уменьшает беспорядок в основном хранилище (за счет беспорядка в форке)
 - Ваш командный процесс отражает процесс внешнего участника
 
Минусы:
- Труднее следить за открытыми ветками (потому что они могут находится на отдельных форках команды)
- Совместная работа над веткой сложнее (владелец ветки должен добавить человека в качестве соавтора)
- Вам нужно понять концепцию общения между форками в Git
- Требуются знания концепций гит (Сложность работы новечку)

**Branches**

Плюсы:
- Хранят всю работу, выполняемую вокруг проекта, в одном месте.
- Все соавторы могут перейти в одну ветку для совместной работы над ней.
- Есть только один пульт Git для работы

Минусы:
- Заброшенные ветки могут накапливаться легче
- Ошибки человеческого фактора, могут быть фатальны

### Основные команды и определения

===== Базовая настройка =====
- git init                      - инициализация git репозитория в фолдере в котором находится cd
- git help                      - отображает доступные команды (-a все доступные 
                                / -с все доступные настройки конфига / git откроет помощник в браузере)
- git config --list             - Отображаем все настройки которые используются в конфиг файле 
                                (--local/global/system --list)
- git config --list [p]         - Чтобы внести настройки в конкретный файл конфигурации

===== Работа с коммитами файлов =====
- git add file                  - Чтобы добавить файл в коммит
- git rm --cached file          - Чтобы убрать файл из коммита
- git commit -m "msg"           - Чтобы сделать коммит файлов
- git log                       - Чтобы посмотреть все коммиты в ветке
- git log -p -1                 - Посмотреть изменения в последнем коммите
- git diff                      - показывает файлы которые претерпели изменения
- git commit --amend -m "msg"   - Исправить сообщение коммита

===== Работа с репозиторием =====
- git remote                    - Команда работы с репозиториями
- get remote -v                 - Для просмотра текущих репозиториев
- git remote add pb <name>      - Добавление репозиториев

===== Получение данных ======
- git fetch [remote-name]       - Получение данных из репозитория
- git pull --allow-unrelated-histories https://github.com/G1ukb/Sandbox.git 
                                - заберет все изменения с ремоута для принудительного мержа
                                
===== Слияние одной ветки с другой =====

- git merge <master>            - Смержить текущую ветку с мастер веткой 
(мастер не меняется но все его изменения уходят в head ветку)      
- git rebase <master>           - Команда, которая позволяет разработчикам интегрировать 
изменения из одной ветви в другую.
    git rebase --continue       - Чтобы подтвердить rebase
    git rebase --abort          - Чтобы отклонить                         

===== Отправка данных ======
- git push <remote> <branch>    - Чтобы запушить изменения на гит репозиторий
- git push <remote> --force     - Force пуш ветки 
- git reset --soft <fe613aa1>   - Чтобы веруться в этот коммит и подобрать все изменения при возврате

===== Работа с ветками =====
- git branches -v               - Чтобы посмотреть все ветки
- git branches -d имя           - удалить ветку
- git checkout имя              - переключение между ветками
- git checkout -b имя           - создание ветки
- git branch --merged <ветка>   - Список веток которые были смержены с текущей
- git branch --no-merged <ветка>- Список веток которые не были смержены с текущей

git pull request - запрос на внесение изменений 
git get - скачивание без слияния
git force push - пуш коммитов с перезаписыванием изменений на сервере

## Practice ##

### @ Инициализация локального репозитория гит + коммит файлов

Для того чтобы инициализировать репозиторий гит нужно дойти до необходимой директории и прописать
git init
После этого будет создан локальный репозиторий
Чтобы закомитить файлы, для начала их нужно добавить используя команду 
git add
Если в прекоммит попал файл который нам не нужен, можно воспользоваться командой
git rm --cached file

#### Как вы можете исправить неправильно написанное сообщение коммита

Чтобы исправить любое неправильно подписанное сообщение коммита, вы будете использовать команду 
«git commit --amend -m "msg"». 
Запустив эту команду, вы можете исправить сообщение об ошибке в редакторе.

#### Как можно откатить коммит

**Если изменения не закоммичены**

Чтобы откатить коммит есть два варианта
сделать git **reset --soft branchHash**
Эта команда отменит последний коммит (но не изменения, которые вы внесли, они сохранятся).

Если последний коммит отвратителен, то можно вообще его удалить
**git reset --hard branchHash**
(но ВСЕ правки, которые не были закоммиченны тоже удаляться)

**git cherry-pick**
Команда используется для того чтобы взять изменения, 
внесённые каким-либо коммитом, и попытаться применить их заново в виде нового коммита наверху текущей ветки.
Это может оказаться полезным чтобы забрать парочку коммитов из другой ветки без полного слияния с той веткой.

**Если изменения закоммичены**

git revert commit-sha1

#### Как можно переключаться между коммитами

Команда git checkout позваляет переключаться не только между ветками.
Но и между коммитами